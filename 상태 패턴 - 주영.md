# ì„±íƒœ íŒ¨í„´(State Pattern)
# ìƒíƒœ íŒ¨í„´ì˜ ì˜ë„

**ìƒíƒœ**Â íŒ¨í„´ì€ ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœê°€ ë³€ê²½ë  ë•Œ í•´ë‹¹ ê°ì²´ê°€ ê·¸ì˜ í–‰ë™ì„ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” í–‰ë™ ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤. ê°ì²´ê°€ í–‰ë™ì„ ë³€ê²½í•  ë•Œ ê°ì²´ê°€ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•œ ê²ƒì²˜ëŸ¼ ë³´ì¼ ìˆ˜Â ìˆìŠµë‹ˆë‹¤.

ì¦‰ ê°ì²´ì˜ íŠ¹ì • ìƒíƒœë¥¼ í´ë˜ìŠ¤ë¡œ ì„ ì–¸í•˜ê³  í•´ë‹¹ ìƒíƒœì—ì„œ í•  ìˆ˜ ìˆëŠ” í–‰ìœ„ë“¤ì„ ë©”ì†Œë“œë¡œ ì •ì˜í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ì´ëŸ¬í•œ ìƒíƒœ í´ë˜ìŠ¤ë¥¼ ì¸í„°í˜ì´ìŠ¤ë¡œ ìº¡ìŠí™” í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¸í„°í˜ì´ìŠ¤ë¡œ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

# ë¬¸ì œ

ìƒíƒœ íŒ¨í„´ì€Â **ìœ í•œ ìƒíƒœ ê¸°ê³„**Â ê°œë…ê³¼ ë°€ì ‘í•˜ê²Œ ê´€ë ¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

ì´ íŒ¨í„´ì˜ ì£¼ìš” ê°œë…ì€ ëª¨ë“  ì£¼ì–´ì§„ ìˆœê°„ì— í”„ë¡œê·¸ë¨ì´ ì†í•´ ìˆì„ ìˆ˜ ìˆëŠ”Â ìƒíƒœë“¤ì˜ ìˆ˜ëŠ”Â ìœ í•œí•˜ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì–´ë–¤ ê³ ìœ í•œ ìƒíƒœ ë‚´ì—ì„œë“  í”„ë¡œê·¸ë¨ì€ ë‹¤ë¥´ê²Œ í–‰ë™í•˜ë©°, í•œ ìƒíƒœì—ì„œ ë‹¤ë¥¸ ìƒíƒœë¡œ ì¦‰ì‹œ ì „í™˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ í˜„ì¬ì˜ ìƒíƒœì— ë”°ë¼ í”„ë¡œê·¸ë¨ì€ íŠ¹ì • ë‹¤ë¥¸ ìƒíƒœë¡œ ì „í™˜ë˜ê±°ë‚˜ ì „í™˜ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì „í™˜ ê·œì¹™ë“¤ì„Â ì „í™˜ë“¤(transitions)ì´ë¼ê³ ë„ í•˜ëŠ”ë°, ì´ëŸ¬í•œ ê·œì¹™ë“¤ ë˜í•œ ìœ í•œí•˜ê³  ë¯¸ë¦¬ ê²°ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

![ì‹ í˜¸ë“±](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/03b76fb3-da4e-4c8d-b65c-1f0edf12a0f1/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221112%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221112T041246Z&X-Amz-Expires=86400&X-Amz-Signature=1edfa210532ce8d1a8ac23b3ff316d275125f763ca2a0ea584edf0e5b9843d5f&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

ìƒíƒœ ë¨¸ì‹ ë“¤ì€ ì¼ë°˜ì ìœ¼ë¡œ ê°ì²´ì˜ ìƒíƒœì— ë”°ë¼ ì ì ˆí•œ í–‰ë™ë“¤ì„ ì„ íƒí•˜ëŠ” ë§ì€ ì¡°ê±´ë¬¸(`if`Â ëŠ”Â `switch`)ìœ¼ë¡œ êµ¬í˜„ë©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì´ 'ìƒíƒœ'ëŠ” ê°ì²´ì˜ í•„ë“œë“¤ì˜ ê°’ë“¤ì˜ ì§‘í•©ì¼ ë¿ì…ë‹ˆë‹¤. ë‹¹ì‹ ì€ ìœ í•œ ìƒíƒœ ë¨¸ì‹ ì— ëŒ€í•´ ë“¤ì–´ë³¸ ì ì´ ì—†ë”ë¼ë„ ì ì–´ë„ í•œ ë²ˆì€ ìƒíƒœë¥¼ êµ¬í˜„í•´ë´¤ì„ ê²ƒì…ë‹ˆë‹¤. ë‹¤ìŒ ì½”ë“œ êµ¬ì¡°ê°€ ìµìˆ™í•´ ë³´ì´ë‚˜ìš”?

ì„¤ëª…ì„ ìµœëŒ€í•œ ì‰½ê²Œ í•˜ê¸°ìœ„í•´ì„œ ì‹ í˜¸ë“±(TrafficLight)ë¥¼ ì´ìš©í•´ì„œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.

```java
public class TrafficLight {

    private String state = "";

    TrafficLight(String state) {
        this.state = state;
    }

    //ì‹ í˜¸ë“±ì˜ ìƒíƒœë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
    public void getState() {
        //ê·¸ë¦°ì´ë©´ "ì´ˆë¡ë¶ˆì´ì•¼" ë¼ëŠ” ë§ì„ í•©ë‹ˆë‹¤.
        if (this.state.equals("green")) {
            System.out.println("ì´ˆë¡ë¶ˆì´ì•¼");
            //ë…¸ë€ìƒ‰ì´ë©´ "ë…¸ë€ë¶ˆì´ì•¼" ë¼ëŠ” ë§ì„ í•©ë‹ˆë‹¤.
        } else if (this.state.equals("yellow")) {
            System.out.println("ë…¸ë€ë¶ˆì´ì•¼");
            //ë¹¨ê°„ì´ë©´ "ë¹¨ê°„ë¶ˆì´ì•¼" ë¼ëŠ” ë§ì„ í•©ë‹ˆë‹¤.
        } else if (this.state.equals("red")) {
            System.out.println("ë¹¨ê°„ë¶ˆì´ì•¼");
        }
    }

    public void convert() {
        System.out.println("ìƒíƒœë¥¼ ë³€í™˜ í•©ë‹ˆë‹¤.");
        if (this.state.equals("green")) {
            this.state = "red";
        } else if (this.state.equals("yellow")) {
            this.state = "green";
        } else if (this.state.equals("red")) {
            this.state = "yellow";
        }
    }
}
```

```java
public class Main {
    public static void main(String[] args) {
        TrafficLight trafficLight = new TrafficLight("green");
        trafficLight.getState(); //ì´ˆë¡ë¶ˆì´ì•¼
        trafficLight.convert(); // ìƒíƒœë¥¼ ë³€í™˜ í•©ë‹ˆë‹¤.
        trafficLight.getState(); //ë¹¨ê°„ë¶ˆì´ì•¼
    }
}
```

ì¡°ê±´ë¬¸ë“¤ì— ê¸°ë°˜í•œ ìƒíƒœ ë¨¸ì‹ ì˜ ê°€ì¥ í° ì•½ì ì€Â `TrafficLight`Â í´ë˜ìŠ¤ì— ìƒíƒœë“¤ê³¼ ìƒíƒœì— ì˜ì¡´í•˜ëŠ” í–‰ë™ë“¤ì„ ì¶”ê°€í• ìˆ˜ë¡ ë¶„ëª…í•´ì§‘ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ í˜„ì¬ ìƒíƒœì— ë”°ë¼ ë©”ì„œë“œì˜ ì ì ˆí•œ í–‰ë™ì„ ì„ íƒí•˜ëŠ” ê±°ëŒ€í•œ ì¡°ê±´ë¬¸ë“¤ì´ ëŒ€ë¶€ë¶„ì˜ ë©”ì„œë“œë“¤ì— í¬í•¨ë  ê²ƒì…ë‹ˆë‹¤. ì´ì™€ ê°™ì€ ì½”ë“œëŠ” ìœ ì§€ ê´€ë¦¬í•˜ê¸°ê°€ ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì „í™˜ ë…¼ë¦¬ë¥¼ ë³€ê²½í•˜ë ¤ë©´ ëª¨ë“  ë©”ì„œë“œë“¤ì˜ ìƒíƒœ ì¡°ê±´ë¬¸ë“¤ì„ ë³€ê²½í•´ì•¼ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì´ ë¬¸ì œëŠ” í”„ë¡œì íŠ¸ê°€ ê°œë°œë˜ë©´ì„œ ë” ë³µì¡í•´ì§€ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤. ì„¤ê³„ ë‹¨ê³„ì—ì„œ ê°€ëŠ¥í•œ ëª¨ë“  ìƒíƒœì™€ ì „í™˜ì„ ì˜ˆì¸¡í•˜ëŠ” ê²ƒì€ ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì œí•œëœ ì¡°ê±´ë¬¸ë“¤ì˜ ì§‘í•©ìœ¼ë¡œ êµ¬ì¶•ë˜ì–´ ê°„ë‹¨ëª…ë£Œí–ˆë˜ ìƒíƒœ ë¨¸ì‹ ì´ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë¶€í’€ë ¤ì ¸ ì—‰ë§ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

# í•´ê²°ë²•

ìƒíƒœ íŒ¨í„´ì€ ê°ì²´ì˜ ëª¨ë“  ê°€ëŠ¥í•œ ìƒíƒœë“¤ì— ëŒ€í•´ ìƒˆ í´ë˜ìŠ¤ë“¤ì„ ë§Œë“¤ê³  ëª¨ë“  ìƒíƒœë³„ í–‰ë™ë“¤ì„ ì´ëŸ¬í•œ í´ë˜ìŠ¤ë“¤ë¡œ ì¶”ì¶œí•  ê²ƒì„ ì œì•ˆí•©ë‹ˆë‹¤.

![TrafficLight.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/1f38682f-24c4-4ed9-a788-7f8a6f630d31/TrafficLight.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221112%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221112T041343Z&X-Amz-Expires=86400&X-Amz-Signature=1a5efed77d711325280a338a9108b0900ea10c7329e45b52863b2879dba491ea&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22TrafficLight.png%22&x-id=GetObject)

í–‰ë™ë“¤ì„ í´ë˜ìŠ¤ë¡œ ì¶”ì¶œí•˜ë©´ ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ê°€ íƒ„ìƒí•©ë‹ˆë‹¤.

![á„‰á…¡á†¼á„á…¢á„‘á…¢á„á…¥á†«á„Œá…¥á†¨á„‹á…­á†¼ (2).png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/3bb05743-d82f-431d-b46e-d352696d11c9/%E1%84%89%E1%85%A1%E1%86%BC%E1%84%90%E1%85%A2%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%E1%84%8C%E1%85%A5%E1%86%A8%E1%84%8B%E1%85%AD%E1%86%BC_%282%29.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221112%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221112T041358Z&X-Amz-Expires=86400&X-Amz-Signature=fe2d2db0af750ce35260488dad2bffea0c291f91a256ef3557a3861784c6605c&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22%25E1%2584%2589%25E1%2585%25A1%25E1%2586%25BC%25E1%2584%2590%25E1%2585%25A2%25E1%2584%2591%25E1%2585%25A2%25E1%2584%2590%25E1%2585%25A5%25E1%2586%25AB%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25A8%25E1%2584%258B%25E1%2585%25AD%25E1%2586%25BC%2520%282%29.png%22&x-id=GetObject)

`TrafficLight`ë¼ëŠ” ì›ë˜ ê°ì²´ëŠ” ëª¨ë“  í–‰ë™ì„ ìì²´ì ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ëŒ€ì‹  í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìƒíƒœ ê°ì²´ ì¤‘ í•˜ë‚˜ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ì €ì¥í•˜ê³  ëª¨ë“  ìƒíƒœì™€ ê´€ë ¨ëœ ì‘ì—…ì„ ê·¸ ê°ì²´ì— ìœ„ì„í•©ë‹ˆë‹¤.

ì½˜í…ìŠ¤íŠ¸ë¥¼ ë‹¤ë¥¸ ìƒíƒœë¡œ ì „í™˜í•˜ë ¤ë©´ í™œì„± ìƒíƒœ ê°ì²´ë¥¼ ìƒˆ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë‹¤ë¥¸ ê°ì²´ë¡œ ë°”ê¾¸ì„¸ìš”. ì´ê²ƒì€ ëª¨ë“  ìƒíƒœ í´ë˜ìŠ¤ë“¤ì´ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë”°ë¥´ê³  ì½˜í…ìŠ¤íŠ¸ ìì²´ê°€ ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ê°ì²´ë“¤ê³¼ ì‘ë™í•  ë•Œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ì´ êµ¬ì¡°ëŠ”Â **[ì „ëµ](https://refactoring.guru/ko/design-patterns/strategy)**Â íŒ¨í„´ê³¼ ë¹„ìŠ·í•´ ë³´ì´ì§€ë§Œ í•œ ê°€ì§€ ì¤‘ìš”í•œ ì°¨ì´ì ì´ ìˆìŠµë‹ˆë‹¤. ìƒíƒœ íŒ¨í„´ì—ì„œì˜ íŠ¹ì • ìƒíƒœë“¤ì€ ì„œë¡œë¥¼ ì¸ì‹í•˜ê³  í•œ ìƒíƒœì—ì„œ ë‹¤ë¥¸ ìƒíƒœë¡œ ì „í™˜ì„ ì‹œì‘í•  ìˆ˜ ìˆì§€ë§Œ ì „ëµë“¤ì€ ê±°ì˜ ëŒ€ë¶€ë¶„ ì„œë¡œì— ëŒ€í•´ ì•Œì§€ ëª»í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

---

# êµ¬í˜„

```java
public class TrafficLight2 {
    private TrafficLightStatus trafficLightStatus;

    TrafficLight2() {
        this.trafficLightStatus = new GreenLight();
    }

    public void setStatus(TrafficLightStatus trafficLightStatus) {
        this.trafficLightStatus = trafficLightStatus;
    }

    public void getState() {
        this.trafficLightStatus.getState();
    }
}
```

```java
public interface TrafficLightStatus {
    public void getState();
}
```

```java
public class GreenLight implements TrafficLightStatus {
    @Override
    public void getState() {
        System.out.println("ì´ˆë¡ë¶ˆì´ì•¼");
    }
}
```

```java
public class RadLight implements TrafficLightStatus {

    @Override
    public void getState() {
        System.out.println("ë¹¨ê°„ë¶ˆì´ì•¼");
    }
}
```

```java
public class YellowLight implements TrafficLightStatus{
    @Override
    public void getState() {
        System.out.println("ë…¸ë€ë¶ˆì´ì•¼");

    }
}
```

```java
public class Main2 {

    public static void main(String[] args) {
        TrafficLight2 trafficLight2 = new TrafficLight2();
        GreenLight greenLight = new GreenLight();
        RadLight radLight = new RadLight();
        YellowLight yellowLight = new YellowLight();

        trafficLight2.getState();
        trafficLight2.setStatus(radLight);
        trafficLight2.getState();
        trafficLight2.setStatus(greenLight);
        trafficLight2.getState();
        trafficLight2.setStatus(yellowLight);
        trafficLight2.getState();

    }
}
```

---

# ì¥ë‹¨ì 

- *ë‹¨ì¼Â ì±…ì„Â ì›ì¹™*. íŠ¹ì • ìƒíƒœë“¤ê³¼ ê´€ë ¨ëœ ì½”ë“œë¥¼ ë³„ë„ì˜ í´ë˜ìŠ¤ë“¤ë¡œ êµ¬ì„±í•˜ì„¸ìš”.
- *ê°œë°©/íì‡„Â ì›ì¹™*. ê¸°ì¡´ ìƒíƒœ í´ë˜ìŠ¤ë“¤ ë˜ëŠ” ì½˜í…ìŠ¤íŠ¸ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ìƒíƒœë“¤ì„ ë„ì…í•˜ì„¸ìš”.
- ê±°ëŒ€í•œ ìƒíƒœ ë¨¸ì‹  ì¡°ê±´ë¬¸ë“¤ì„ ì œê±°í•˜ì—¬ ì½˜í…ìŠ¤íŠ¸ì˜ ì½”ë“œë¥¼ ë‹¨ìˆœí™”í•˜ì„¸ìš”.

# ì°¸ê³ 

[ìƒíƒœ íŒ¨í„´](https://refactoring.guru/ko/design-patterns/state)

[[10ë¶„ í…Œì½”í†¡] ğŸ’ í¬ëª¨ì˜ ìƒíƒœ íŒ¨í„´](https://www.youtube.com/watch?v=wYMN3sPIeHY&ab_channel=%EC%9A%B0%EC%95%84%ED%95%9CTech)

[ë””ìì¸íŒ¨í„´, open Closed principles, ê°œë°© íì‡„ ì›ì¹™, Design Patterns](https://www.youtube.com/watch?v=EmnIdUvTRfk&ab_channel=%EC%BD%94%EB%93%9C%EC%97%86%EB%8A%94%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)

[ì¥ì£¼ì˜ ìƒíƒœ íŒ¨í„´ ì •ë¦¬](https://www.notion.so/State-Pattern-98d158080c3740129b5290eb09c98cd1)

[victolee State Pattern](https://victorydntmd.tistory.com/294)
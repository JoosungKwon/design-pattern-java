# ì´í„°ë ˆì´í„° íŒ¨í„´(Iterator Pattern)

## â“ Iterator? ë°˜ë³µì?

<img src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/159bdccf-2623-49cf-a026-7cca4ae15908/SmartSelectImage_2022-11-19-03-47-46.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221119%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221119T050019Z&X-Amz-Expires=86400&X-Amz-Signature=ba605227210e1b5d1bc729914a6332a3d309306ea611e9bcbae1ab2ff587be9a&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22SmartSelectImage_2022-11-19-03-47-46.png%22&x-id=GetObject">

<img src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/4ca24513-fc08-4b9e-8d28-7d2b2435d55c/SmartSelectImage_2022-11-19-04-32-03.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221119%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221119T050043Z&X-Amz-Expires=86400&X-Amz-Signature=c2c9163e2828294286ae007f69a885a8e1710eb438c963df945d7060ca1f3eca&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22SmartSelectImage_2022-11-19-04-32-03.png%22&x-id=GetObject">

Iteratorë¥¼ ì‚¬ì „ì— ê²€ìƒ‰í•˜ë©´ **â€œë°˜ë³µìâ€** ë¼ëŠ” ëœ»ìœ¼ë¡œ ë‚˜ì˜¤ëŠ”ë° ì´ ëœ»ì€ â€œ**ë°˜ë³µí•˜ë‹¤**â€ë¼ëŠ” Iterateì˜ ì–´ì›ì„ ë‘” ë‹¨ì–´ì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ Iterator íŒ¨í„´ì€ ë¬´ì–¸ê°€ë¥¼ ë°˜ë³µí•˜ëŠ” íŒ¨í„´ì´ë¼ëŠ” ìƒê°ì´ ë“œëŠ”ë° ì•„ì§ì€ ì •í™•íˆ ê·¸ ëœ»ì„ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

## âœ” Iterator Pattern

<aside>
ğŸ’¡ Interator (ì´í„°ë ˆì´í„°) íŒ¨í„´ì´ë€

ì§‘í•© ê°ì²´ **ë‚´ë¶€ êµ¬ì¡°ë¥¼ ë…¸ì¶œì‹œí‚¤ì§€ ì•Šê³  ìˆœíšŒ í•˜ëŠ” ë°©ë²•ì„ ì œê³µ**í•˜ëŠ” í–‰ìœ„ íŒ¨í„´ - ë°±ê¸°ì„ 

</aside>

ì¦‰, **Interator íŒ¨í„´**ì€ ì§‘í•© ê°ì²´ë¥¼ ìˆœíšŒí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ë‹¤ì–‘í•œ ìˆœíšŒ ë°©ë²•ì„ ì œê³µí•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.
<img src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/de7fcbab-2907-4a41-8f52-ded922133b3c/SmartSelectImage_2022-11-19-04-58-30.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221119%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221119T050146Z&X-Amz-Expires=86400&X-Amz-Signature=9bf4b13acd27f635b4989e16aa8ca2e01ae049924ac3c85e6a17da6e55b64219&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22SmartSelectImage_2022-11-19-04-58-30.png%22&x-id=GetObject">

- **Iterator <interface>** : í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤, ì–´ë–»ê²Œ ìˆœíšŒí• ì§€ì— ëŒ€í•œ ê¸°ëŠ¥(ë°©ë²•)ì„ ëª…ì‹œí•´ë‘” ì¸í„°í˜ì´ìŠ¤ â†’ ex) getNext(), hasNext()
- **ConcreteIterator** : Iterator ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ êµ¬í˜„ì²´, ìˆœíšŒì— ëŒ€í•œ ì„¸ë¶€ì ì¸ ë¡œì§ì„ êµ¬í˜„í•œ í´ë˜ìŠ¤
- **Aggregate <interface>** : Iterator ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ êµ¬í˜„ì²´ë¥¼ ì œê³µí•˜ë„ë¡ ëª…ì‹œí•´ë‘” ì§‘í•©(ìë£Œêµ¬ì¡°)ì˜ ì¸í„°í˜ì´ìŠ¤ ex) List, íŠ¹ì • ìš”ì†Œë“¤ì„ ê°€ì§„ ì§‘í•©ì²´
- **ConcreteAggregate** : Aggregate ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ êµ¬í˜„ì²´ë¡œ ConcreteIterator í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì œê³µí•˜ëŠ” êµ¬í˜„ í´ë˜ìŠ¤ ex) ArrayList â†’ ArrayListëŠ” ArrayListItrë¼ëŠ” ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•¨

<aside>
âœ… ì»¬ë ‰ì…˜ êµ¬í˜„ ë°©ë²•ì„ ë…¸ì¶œì‹œí‚¤ì§€ ì•Šìœ¼ë©´ì„œë„ ê·¸ ì§‘í•©ì²´ì•ˆì— ë“¤ì–´ìˆëŠ” ëª¨ë“  í•­ëª©ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ ì£¼ëŠ” ë°©ë²•ì„ ì œê³µí•´ ì£¼ëŠ” íŒ¨í„´

</aside>

â†’ Iterator íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ì§‘í•©ì²´ ë‚´ì—ì„œ ì–´ë–¤ ì‹ìœ¼ë¡œ ì¼ì´ ì²˜ë¦¬ë˜ëŠ”ì§€ ëª°ë¼ë„ ê·¸ ì•ˆì— ë“¤ì–´ìˆëŠ” í•­ëª©ë“¤ì— ëŒ€í•´ì„œ ë°˜ë³µì‘ì—…ì„ ìˆ˜í–‰ í•  ìˆ˜ ìˆë‹¤

### â—êµ¬í˜„ ì½”ë“œâ—

### before

```java
public class Item {

    private String name;

    private int price;

    public Item(String name, int price) {
        this.name = name;
	this.price = price;
    }

    public String getName() { return name; }

    public int getPrice() { return price; }
}
```

```java
import java.util.ArrayList;
import java.util.List;
import java.util.Set;

public class Box {

    List<Item> items = new ArrayList<>();

    public List<Item> getItems() { return items; }

    public void addItem(String name,int price) { this.items.add(new Item(name,price)); }
}
```

```java
import java.util.Collections;
import java.util.Iterator;
import java.util.List;

public class Client {

    public static void main(String[] args) {
        Box box = new Box();
        box.addItem("í‚¤ë³´ë“œ", 100000);
        box.addItem("ë§ˆìš°ìŠ¤", 20000);
	box.addItem("ì´ì–´í°", 150000);

        // TODO ë“¤ì–´ê°„ ìˆœì„œëŒ€ë¡œ ì¡°íšŒí•˜ê¸°
        List<Item> items = box.getItems();
        for (int i = 0 ; i < items.size() ; i++) {
            Item item = item.getName()s.get(i);
            System.out.println(item.getName() + "ì˜ ê°€ê²©ì€ " + item.getPrice() + "ì› ì…ë‹ˆë‹¤");
        }

        // TODO ê°€ê²©ì´ ë†’ì€ ìˆœìœ¼ë¡œ ì¡°íšŒí•˜ê¸°
        Collections.sort(items, (p1, p2) -> p2.getPrice().compareTo(p1.getPrice()));
        for (int i = 0 ; i < items.size() ; i++) {
            Item item = items.get(i);
            System.out.println(item.getName() + "ì˜ ê°€ê²©ì€ " + item.getPrice() + "ì› ì…ë‹ˆë‹¤");
        }
    }

}
```

### after

```java
import java.util.Collections;
import java.util.Iterator;
import java.util.List;

public class HighPriceIterator implements Iterator<Item> {

    private Iterator<Item> internalIterator;

    public HighPriceIterator(List<Item> Items) {
	List<Item> newItems = new ArrayList<>(Items);
        Collections.sort(newItems, (p1, p2) -> p2.getPrice().compareTo(p1.getPrice()));
        this.internalIterator = newItems.iterator();
    }

    @Override
    public boolean hasNext() {
        return this.internalIterator.hasNext();
    }

    @Override
    public Item next() {
        return this.internalIterator.next();
    }
}
```

```java
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class Box {

    List<Item> items = new ArrayList<>();

    public List<Item> getItems() { return items; }

    public void addItem(String name,int price) { this.items.add(new Item(name,price)); }

    public Iterator<Item> getHighPriceIterator() {
        return new HighPriceIterator(this.items);
    }

}
```

```java
import java.util.Iterator;
import java.util.List;

public class Client {

    public static void main(String[] args) {
        Box box = new Box();
	box.addItem("í‚¤ë³´ë“œ", 100000);
	box.addItem("ë§ˆìš°ìŠ¤", 20000);
	box.addItem("ì´ì–´í°", 150000);

        // TODO ê°€ê²©ì´ ë†’ì€ ìˆœìœ¼ë¡œ ì¡°íšŒí•˜ê¸°
        Iterator<Item> highPriceIterator = box.getHighPriceIterator();
        while(highPriceIterator.hasNext()) {
            Item item = highPriceIterator.next();
            System.out.println(item.getName() + "ì˜ ê°€ê²©ì€ " + item.getPrice() + "ì› ì…ë‹ˆë‹¤");
        }
    }

}
```

### ğŸ‘ **ì¥ì **

- ì§‘í•© ê°ì²´ê°€ ê°€ì§€ê³  ìˆëŠ” ê°ì²´ë“¤ì— ì† ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ì¼ê´€ëœ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ ì—¬ëŸ¬ í˜•íƒœì˜ ì§‘í•© êµ¬ì¡°ë¥¼ ìˆœíšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ì§‘í•©ì²´ì—ì„œëŠ” ë°˜ë³µ ì‘ì—…ì— ëŒ€í•œ ì±…ì„ì„ Iterator ê°ì²´ì—ê²Œ ë§¡ê¸¸ ìˆ˜ ìˆë‹¤.
- ClientëŠ” ë‚´ë¶€ êµ¬ì¡°ì— ëŒ€í•´ ì•Œ í•„ìš”ê°€ ì—†ì–´ì§‘ë‹ˆë‹¤ â†’ **SRP**
- Clientì—ì„œ Iterator ì¸í„°í˜ì´ìŠ¤ë¥¼ ì£¼ì…ë°›ëŠ” í˜•íƒœë¼ë©´ Clientì˜ ì½”ë“œ ë³€ê²½ ì—†ì´ ìˆœíšŒí•˜ëŠ” ë¡œì§ì„ ë³€ê²½í•  ìˆ˜ë„ ìˆë‹¤ â†’ **OCP**

### ğŸ‘ **ë‹¨ì **

- í´ë˜ìŠ¤ê°€ ëŠ˜ì–´ë‚˜ê³  ë³µì¡ë„ê°€ ì¦ê°€í•©ë‹ˆë‹¤
- ì ì ˆí•œ ìƒí™©(ë‚´ë¶€ ìë£Œêµ¬ì¡°ê°€ ìì£¼ ë³€ê²½ë˜ëŠ”)ì´ ì•„ë‹ˆë¼ë©´ ë¹„ìš©ì´ ë” í´ ìˆ˜ë„ ìˆë‹¤

### ğŸ‘Š **ì‚¬ìš©ë˜ëŠ” ì˜ˆì‹œ**

- ìë°” - `java.util.Enumeration` ê³¼ `java.util.Iterator`
- ìë°” - `Java StAX (Streaming API for XML)` ì˜ Iterator ê¸°ë°˜ API : XMLë¥¼ ì½ì„ ìˆ˜ ìˆëŠ” Iteratorë¥¼ ì œê³µ
- ìŠ¤í”„ë§ì˜ `CompositeIterator` : Iteratorë¥¼ ì¡°í•©í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œ ì œê³µ

### âš¡ ì¶”ê°€

- Iterator (ì´í„°ë ˆì´í„°) íŒ¨í„´ì˜ ì£¼ ëª©ì ì€ ë‚´ë¶€ ìë£Œêµ¬ì¡°ë¥¼ ê°ì¶”ê³  ë‚´ë¶€ ìš”ì†Œë¥¼ ìˆœíšŒí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•˜ê¸° ìœ„í•¨ì´ë‹¤. ë”°ë¼ì„œ ë³´í†µì˜ ê²½ìš°ëŠ”

```java
	public class MyList implements Iterable<String> {

	   private List<String> list = new ArrayList<String>();

	   public void add(String name){ list.add(name); }

	   public Iterator<String> iterator() {
	      return new Iterator<String>(){
		 int seq = 0;
		 public boolean hasNext() { return seq < list.size(); }
		 public String next() { return list.get(seq++); }
		 public void remove() {}
	      };
	   }
	}
```

- ìœ„ ë°©ì‹ì²˜ëŸ¼ ì§ì ‘ ë‚´ë¶€ ìš”ì†Œì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
- í•˜ì§€ë§Œ, ìœ„ì˜ ì˜ˆì‹œ `HighPriceIterator` ì™€ ê°™ì´ íŠ¹ì • ì¡°ê±´ì— ë§ê²Œ ìˆœì„œë¥¼ ë³€ê²½í•˜ì—¬ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” Iteratorë¥¼ ì œê³µí•˜ê¸°ë¥¼ ì›í•œë‹¤ë©´ ( Ex.ì—­ìˆœìœ¼ë¡œ ì œê³µí•œë‹¤ë˜ì§€, ë“±ë“± ) `Iterator` ë¥¼ ë‹¤ì–‘í•œ í˜•íƒœë¡œ êµ¬í˜„í•˜ì—¬ ì œê³µí•  ìˆ˜ë„ ìˆë‹¤. 
- ì´ë•ŒëŠ” ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì˜¨ `List<Item> Items` ì˜ ìˆœì„œë¥¼ ì§ì ‘ ë°”ê¾¸ì§€ ì•Šê²Œ ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ì„œ ì œê³µí•´ì•¼í•œë‹¤. â†’ ì´ì— ë”°ë¥¸ ë¹„ìš©ì´ ì¶”ê°€ ë  ìˆ˜ë„ ìˆë‹¤.

<aside>
âœ… í•œì¤„ ì •ë¦¬: ë‚´ë¶€ì ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” ìë£Œêµ¬ì¡°ë¥¼ ìˆœíšŒí•  ìˆ˜ ìˆëŠ” ê°ì²´ë¥¼ ì œê³µí•˜ëŠ” íŒ¨í„´

</aside>

### ì°¸ê³ 

[](https://velog.io/@cham/Design-Pattern-%EC%9D%B4%ED%84%B0%EB%A0%88%EC%9D%B4%ED%84%B0-%ED%8C%A8%ED%84%B4-iterator-pattern)

[[í–‰ë™ íŒ¨í„´] ì´í„°ë ˆì´í„° íŒ¨í„´](https://dev-youngjun.tistory.com/219)

[ì´í„°ë ˆì´í„° íŒ¨í„´ (iterator pattern)](https://jusungpark.tistory.com/25)

[ì½”ë”©ìœ¼ë¡œ í•™ìŠµí•˜ëŠ” GoFì˜ ë””ìì¸ íŒ¨í„´ - ì¸í”„ëŸ° | ê°•ì˜](https://www.inflearn.com/course/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4/dashboard)
